<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Solana Meme Coin Radar</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      body { font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; padding: 24px; }
      table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
      th, td { padding: 4px 6px; border-bottom: 1px solid #ddd; }
      th { text-align: left; }
      tr:hover { background-color: #f5f5f5; }
    </style>
  </head>
  <body>
    <h1>Solana Meme Coin Radar</h1>
    <p>Live view of tokens with unusual activity (demo based on Solana logs).</p>

    <table id="tokens-table">
      <thead>
        <tr>
          <th>Symbol</th>
          <th>Address</th>
          <th style="text-align:right">Trades (5m)</th>
          <th style="text-align:right">Volume (5m)</th>
          <th style="text-align:right">Spike Score</th>
        </tr>
      </thead>
      <tbody id="tokens-body"></tbody>
    </table>

    <script>
      const tbody = document.getElementById("tokens-body");
      const ws = new WebSocket((location.protocol === "https:" ? "wss://" : "ws://") + location.host);

      ws.onmessage = (event) => {
        const msg = JSON.parse(event.data);
        if (msg.type !== "snapshot") return;
        const tokens = msg.data;

        tbody.innerHTML = "";
        tokens.forEach((t) => {
          const tr = document.createElement("tr");

          const tdSymbol = document.createElement("td");
          tdSymbol.textContent = t.symbol;

          const tdAddr = document.createElement("td");
          tdAddr.textContent = t.address;

          const tdTrades = document.createElement("td");
          tdTrades.textContent = t.tradesLast5m;
          tdTrades.style.textAlign = "right";

          const tdVol = document.createElement("td");
          tdVol.textContent = t.volumeLast5m.toFixed(0);
          tdVol.style.textAlign = "right";

          const tdScore = document.createElement("td");
          tdScore.textContent = t.spikeScore.toFixed(2);
          tdScore.style.textAlign = "right";

          tr.appendChild(tdSymbol);
          tr.appendChild(tdAddr);
          tr.appendChild(tdTrades);
          tr.appendChild(tdVol);
          tr.appendChild(tdScore);
          tbody.appendChild(tr);
        });
      };
    </script>
  </body>
</html>
